# Mumbies Partner Portal - Essential Rules

## The Stack
- React 18 + TypeScript + Vite
- Tailwind CSS (no custom CSS)
- Supabase (database + auth)
- Vercel (hosting)
- GitHub: https://github.com/mumbies/platform-mvp

## Critical URLs
- Partner Portal: partners.staging.mumbies.com
- Admin Portal: admin.mumbies.com
- Supabase: zsrkexpnfvivrtgzmgdw.supabase.co

## File Structure - DO NOT CONFUSE
```
/src/                    ← Main consumer site (mumbies.com)
                         ← DO NOT edit for partner portal

/apps/partner/          ← Partner portal (partners.staging.mumbies.com)
                        ← ONLY edit these files

/apps/admin/            ← Admin portal (admin.mumbies.com)
```

## Code Rules
✅ DO:
- Use TypeScript (no `any`)
- Add error handling to all async operations
- Console.log for debugging
- Commit and push to GitHub after changes
- Verify on live URL after deployment

❌ DON'T:
- Create duplicate files
- Use inline styles
- Claim "fixed" without testing on live site
- Edit /src/ files for partner portal changes

## Database Queries - CRITICAL
```typescript
// GOOD - Explicit fields for RLS compatibility
const { data, error } = await supabase
  .from('partner_leads')
  .select('id, email, status, created_at')
  .eq('partner_id', partnerId);

if (error) {
  console.error('Error:', error);
  return;
}

// BAD - select('*') fails with RLS
const { data } = await supabase
  .from('partner_leads')
  .select('*')
  .eq('partner_id', partnerId);
```

## How Bolt Works
1. Bolt edits files in GitHub repo
2. Commits and pushes to main branch
3. Vercel auto-deploys (2 minutes)
4. Changes appear on live URL

**Always verify on partners.staging.mumbies.com after deployment**

## When Something Breaks
1. Show error message
2. Show what query returned
3. Show browser console
4. Then we fix it together

## Test Partner
- Email: partner@wihumane.org
- Password: demo123
- Org: Wisconsin Humane Society
- 26 leads in database

## Emergency Fix Protocol
- Minimum viable change only
- Single commit
- Verify immediately on live URL
- No refactoring during emergencies